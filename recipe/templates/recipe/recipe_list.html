{% extends 'recipe/base.html' %}

{% block title %}All Recipes{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto mt-10">
    <h2 class="text-3xl font-bold text-gray-800 mb-6">All Recipes</h2>

    <a href="{% url 'create_recipe' %}"
       class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 inline-block mb-6">
        + Add New Recipe
    </a>

    {% if recipes %}
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-7">
            {% for recipe in recipes %}
                <div class="bg-white rounded-xl shadow-md hover:shadow-xl transition p-4">

                    <!-- Recipe Image -->
                    {% if recipe.recipe_image %}
                    <img src="{{ recipe.recipe_image.url }}" 
                         alt="{{ recipe.recipe_name }}" 
                         class="w-full h-52 object-cover rounded-lg mb-4">
                    {% endif %}

                    <!-- Recipe Name -->
                    <h3 class="text-xl font-semibold text-gray-800">{{ recipe.recipe_name }}</h3>

                    <!-- Description -->
                    <p class="text-gray-600 mt-2">
                        {{ recipe.recipe_description|truncatewords:20 }}
                    </p>

                    <!-- Category -->
                    <p class="text-sm text-gray-500 mt-2">
                        Category: 
                        <span class="font-medium text-gray-700">
                        {% if recipe.category %}
                            {{ recipe.category.name }}
                        {% else %}
                            No Category
                        {% endif %}

                        </span>
                    </p>

                    <!-- Views -->
                    <p class="text-sm text-gray-500">
                        Views: <span class="font-semibold">{{ recipe.recipe_view_count }}</span>
                    </p>

                    <!-- View Button -->
                    <a href="{% url 'recipe_detail' recipe.id %}"
                       class="mt-3 inline-block text-blue-600 font-medium hover:underline">
                        View Recipe â†’
                    </a>

                    <!-- Buttons Row -->
                    <div class="flex justify-between mt-4">

                        <!-- Edit -->
                        <a href="{% url 'update_recipe' recipe.id %}"
                           class="px-3 py-1 bg-yellow-500 text-white rounded-md hover:bg-yellow-600">
                            Edit
                        </a>

                        <!-- Delete -->
                        <a href="{% url 'delete_recipe' recipe.id %}"
                           onclick="return confirm('Are you sure you want to delete this recipe?');"
                           class="px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700">
                            Delete
                        </a>

                    </div>

                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-gray-600">No recipes found. Add one to get started!</p>
    {% endif %}
</div>
{% endblock %}
